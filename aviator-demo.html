<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Aviator</title>
<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial,sans-serif;
  text-align:center;
  margin:0;
  padding:0;
}
.wrapper {
  width:90%;
  max-width:820px;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  align-items:center;
}
canvas {
  display:block;
  margin:10px auto;
  border:3px solid #fff;
  border-radius:10px;
  width:90%;
  height:250px;
  background:#000;
}
.container {
  width:100%;
  margin:10px auto;
  padding:10px;
  background:#1a1a1a;
  border-radius:16px;
  border:2px solid #333;
  box-shadow:0 0 15px rgba(255,255,255,0.08);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  max-height:300px;
  overflow:hidden;
}
.row {
  display:flex;
  justify-content:center;
  flex-wrap:nowrap;
  gap:10px;
  width:100%;
}
.bet-display {
  width:60px;
  text-align:center;
  background:#000;
  border-radius:10px;
  padding:4px 0;
  font-size:14px;
  font-weight:bold;
}

/* Buttons */
button {
  border:none;
  cursor:pointer;
  font-weight:bold;
  transition:all 0.2s ease;
}
.right-btn {
  height:60px;
  border-radius:16px;
  font-size:24px;
  font-weight:bold;
  color:#fff;
  background:linear-gradient(90deg,#00c853,#00e676);
  border:2px solid #00ff88;
  box-shadow:0 5px 15px rgba(0,200,83,0.4);
  display:flex;
  align-items:center;
  justify-content:center;
}
.right-btn span {pointer-events:none;}
.right-btn:hover {
  background:linear-gradient(90deg,#00e676,#00ff88);
  border-color:#00ff88;
  box-shadow:0 8px 25px rgba(0,230,118,0.6);
  transform:scale(1.05);
}
.action-btn, .preset-btn {
  background:linear-gradient(90deg,#4f46e5,#6366f1);
  color:#fff;
  padding:10px 16px;
  border-radius:16px;
  font-size:16px;
  flex:1;
  min-width:100px;
  box-shadow:0 4px 10px rgba(100,100,255,0.3);
}
.action-btn:hover, .preset-btn:hover {
  background:linear-gradient(90deg,#6366f1,#4f46e5);
  box-shadow:0 6px 15px rgba(100,100,255,0.5);
  transform:scale(1.05);
}
.adjust-btn {
  background:linear-gradient(90deg,#ff5722,#ff7043);
  color:#fff;
  font-size:16px;
  width:40px;
  height:40px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 4px 8px rgba(255,87,34,0.4);
}
.adjust-btn:hover {
  background:linear-gradient(90deg,#ff7043,#ff5722);
  box-shadow:0 6px 12px rgba(255,87,34,0.6);
  transform:scale(1.1);
}
button:active { transform:scale(0.97); }
@media(max-width:600px){
  .action-btn,.preset-btn{ font-size:14px; padding:8px; min-width:100%; }
  .adjust-btn{ width:30px;height:30px;font-size:14px; }
  .right-btn{ height:40px;font-size:18px; }
}
.balance-row { justify-content:flex-end; display:flex; max-width:820px; margin:10px auto; }
.balance-row div { background:rgba(255,255,255,0.08); padding:10px 20px; border-radius:8px; font-weight:bold; }
.status { margin-top:10px; font-size:16px; color:#ffeb3b; }
.round-history { max-width:820px; margin:10px auto; font-size:14px; color:#aaa; display:flex; flex-wrap:wrap; gap:5px; justify-content:center; }
.round { background:rgba(255,255,255,0.1); padding:4px 8px; border-radius:4px; }
.inner-control { display:flex; gap:10px; align-items:center; justify-content:flex-start; }
.left-controls { display:flex; align-items:center; gap:10px; }
</style>
</head>
<body>

<div style="display:flex; justify-content:space-between; align-items:center; max-width:820px; margin:10px auto; padding:10px 20px; background:#1a1a1a; border-radius:12px; border:2px solid #333;">
  <h2 style="color:red; margin:0;">Aviator</h2>
  <div style="color:#00ff00; font-weight:bold;">Balance: <span id="balance">5000</span></div>
</div>

<div class="round-history" id="roundHistory"></div>

<div class="wrapper">
  <canvas id="canvas" width="800" height="250"></canvas>

  <!-- Container 1 -->
  <div class="container" id="container1">
    <div class="inner-control">
      <div class="left-controls">
        <button id="decBet1" class="adjust-btn">-</button>
        <div class="bet-display" id="betDisplay1">10</div>
        <button id="incBet1" class="adjust-btn">+</button>
      </div>
    </div>
    <div class="inner-control">
      <button id="autoToggle1" class="action-btn">‚öôÔ∏è Auto Bet: OFF</button>
      <button id="cashOut1" class="action-btn">üí∞ Auto Cash Out</button>
    </div>
    <div class="preset-grid">
      <button class="preset-btn" data-bet="10">10</button>
      <button class="preset-btn" data-bet="50">50</button>
    </div>
    <div class="preset-grid">
      <button class="preset-btn" data-bet="50">50</button>
      <button class="preset-btn" data-bet="100">100</button>
    </div>
    <div class="inner-control" style="justify-content:flex-end;">
      <button id="mainAction1" class="right-btn"><span>üéØ Bet 10.00 KES</span></button>
    </div>
  </div>

  <!-- Container 2 -->
  <div class="container" id="container2">
    <div class="inner-control">
      <div class="left-controls">
        <button id="decBet2" class="adjust-btn">-</button>
        <div class="bet-display" id="betDisplay2">100</div>
        <button id="incBet2" class="adjust-btn">+</button>
      </div>
    </div>
    <div class="inner-control">
      <button id="autoToggle2" class="action-btn">‚öôÔ∏è Auto Bet: OFF</button>
      <button id="cashOut2" class="action-btn">üí∞ Auto Cash Out</button>
    </div>
    <div class="preset-grid">
      <button class="preset-btn" data-bet="10">10</button>
      <button class="preset-btn" data-bet="50">50</button>
    </div>
    <div class="preset-grid">
      <button class="preset-btn" data-bet="50">50</button>
      <button class="preset-btn" data-bet="100">100</button>
    </div>
    <div class="inner-control" style="justify-content:flex-end;">
      <button id="mainAction2" class="right-btn"><span>üéØ Bet 100.00 KES</span></button>
    </div>
  </div>
</div>

<script>
const canvas=document.getElementById("canvas"), ctx=canvas.getContext("2d");
const balanceEl=document.getElementById("balance"), roundHistoryEl=document.getElementById("roundHistory");
let balance=5000, multiplier=1, crashAt, countdown=6, inCountdown=true, animating=false, crashed=false;
let flyTextArray=[], rounds=[], stripeOffset=0;

// Images
const planeImg=new Image(); planeImg.src="countdown.png";
const countdownImage=new Image(); countdownImage.src="countdown.png";

// Draw stripes
function drawStripes(){
  const gradient=ctx.createLinearGradient(0,0,0,canvas.height);
  gradient.addColorStop(0,"#222");
  gradient.addColorStop(0.5,"#333");
  gradient.addColorStop(1,"#222");
  ctx.fillStyle=gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);
  const stripeWidth=20, stripeGap=23;
  ctx.strokeStyle="rgba(255,255,255,0.05)";
  ctx.lineWidth=2;
  for(let x=-canvas.height + (stripeOffset % (stripeWidth+stripeGap)); x<canvas.width; x+=stripeWidth+stripeGap){
    ctx.beginPath();
    ctx.moveTo(x,0);
    ctx.lineTo(x+canvas.height,canvas.height);
    ctx.stroke();
  }
  stripeOffset+=1;
}

// Beep
function beep(freq,dur){
  const ctxAudio=new(window.AudioContext||window.webkitAudioContext)();
  const osc=ctxAudio.createOscillator();
  const gain=ctxAudio.createGain();
  osc.connect(gain); gain.connect(ctxAudio.destination);
  osc.type="sine"; osc.frequency.value=freq;
  gain.gain.setValueAtTime(0.1,ctxAudio.currentTime);
  osc.start(); osc.stop(ctxAudio.currentTime+dur/1000);
}

// Draw
function draw(){
  drawStripes();
  if(inCountdown){
    const imgWidth=300,imgHeight=100,imgX=canvas.width/2-imgWidth/2,imgY=canvas.height/2-imgHeight/2;
    ctx.drawImage(countdownImage,imgX,imgY,imgWidth,imgHeight);
    const lineWidth=imgWidth*(countdown/6), lineHeight=10;
    ctx.fillStyle="rgba(255,0,0,0.8)";
    ctx.fillRect(imgX,imgY+imgHeight-lineHeight-5,lineWidth,lineHeight);
    ctx.fillStyle="#fff";
    ctx.font="bold 27px Arial"; ctx.textAlign="center";
    ctx.fillText("poweredbydenis@2025",canvas.width/2,imgY+imgHeight/2+5);
    ctx.fillStyle="#fff"; ctx.font="bold 40px Arial";
    ctx.fillText(countdown,canvas.width/2,imgY+imgHeight/2-20);
    return;
  }
  ctx.font="bold 80px Arial"; ctx.fillStyle=crashed?"#f00":"#fff"; ctx.textAlign="center";
  ctx.fillText(multiplier.toFixed(2)+"√ó",canvas.width/2,canvas.height/2);
  if(!crashed){
    ctx.strokeStyle="#0f0"; ctx.lineWidth=3;
    ctx.beginPath(); ctx.moveTo(0,canvas.height);
    ctx.lineTo(multiplier*50,canvas.height-multiplier*15); ctx.stroke();
    const planeX=multiplier*50, planeY=canvas.height-multiplier*15;
    if(planeImg.complete) ctx.drawImage(planeImg,planeX-20,planeY-20,40,40);
  }
  flyTextArray.forEach((text,index)=>{
    ctx.font="bold 40px Arial"; ctx.fillStyle="white"; ctx.textAlign="center"; ctx.globalAlpha=text.alpha;
    ctx.fillText(text.msg,canvas.width/2,canvas.height/2-text.y);
    text.y+=2; text.alpha-=0.02; if(text.alpha<=0) flyTextArray.splice(index,1);
  });
  ctx.globalAlpha=1;
}

// Countdown
function startCountdown(){
  crashed=false; inCountdown=true; countdown=6;
  const interval=setInterval(()=>{
    countdown--;
    if(countdown<=0){ clearInterval(interval); inCountdown=false; startRound(); }
  },1000);
}

// Round
function startRound(){
  crashAt=1.01+Math.random()*3; multiplier=1; crashed=false; animating=true;
  const ctxAudio=new(window.AudioContext||window.webkitAudioContext)();
  const osc=ctxAudio.createOscillator(); const gain=ctxAudio.createGain();
  osc.connect(gain); gain.connect(ctxAudio.destination);
  osc.type="sine"; osc.frequency.value=300; gain.gain.setValueAtTime(0.05,ctxAudio.currentTime);
  osc.start();
  function animate(){
    if(!animating) return;
    multiplier+=0.02; osc.frequency.value+=1;
    if(multiplier>=crashAt){
      animating=false; crashed=true; osc.stop(); beep(100,400);
      flyTextArray.push({msg:"Flew Away!",y:0,alpha:1});
      addRoundToHistory(multiplier.toFixed(2));
      for(let sys of betSystems){
        if(sys.autoBet && balance>=sys.bet){ balance-=sys.bet; sys.betPlaced=true; } 
        else sys.betPlaced=false;
        sys.updateUI();
      }
      setTimeout(()=>{startCountdown();},2000);
    }
    draw(); if(animating) requestAnimationFrame(animate);
  }
  animate();
}

// Animation loop
function loop(){ draw(); requestAnimationFrame(loop); }
loop();

// Round history
function addRoundToHistory(mult){ rounds.unshift(mult); if(rounds.length>9) rounds.pop(); renderRounds(); }
function renderRounds(){ roundHistoryEl.innerHTML=''; rounds.forEach(r=>{
  const div=document.createElement('div'); div.className='round'; div.textContent=r+'√ó';
  if(r<2) div.style.background='#2196f3'; else if(r<10) div.style.background='#9c27b0'; else div.style.background='#f44336';
  div.style.color='white'; roundHistoryEl.appendChild(div);
});}

// BET SYSTEM
const betSystems=[];
function createBetSystem(id,initialBet){
  let bet=initialBet, betPlaced=false, autoBet=false;
  const betDisplay=document.getElementById(`betDisplay${id}`);
  const inc=document.getElementById(`incBet${id}`);
  const dec=document.getElementById(`decBet${id}`);
  const main=document.getElementById(`mainAction${id}`);
  const presetBtns=document.querySelectorAll(`#container${id} .preset-btn`);
  const autoBtn=document.getElementById(`autoToggle${id}`);
  const cashBtn=document.getElementById(`cashOut${id}`);

  function updateUI(){
    betDisplay.textContent=bet;
    if(betPlaced){
      main.querySelector('span').textContent = `üí∞ Cash Out: ${(bet*multiplier).toFixed(2)} KES`;
    } else {
      main.querySelector('span').textContent = `üéØ Bet ${bet.toFixed(2)} KES`;
    }
    autoBtn.textContent=`‚öôÔ∏è Auto Bet: ${autoBet?"ON":"OFF"}`;
    balanceEl.textContent=balance.toFixed(2);
  }

  inc.onclick=()=>{ bet+=10; updateUI(); };
  dec.onclick=()=>{ bet=Math.max(10,bet-10); updateUI(); };
  presetBtns.forEach(btn=>btn.onclick=()=>{ bet=Number(btn.dataset.bet); updateUI(); });

  main.onclick=()=>{
    if(!betPlaced){
      if(balance>=bet){ balance-=bet; betPlaced=true; updateUI(); }
    } else {
      balance+=bet*multiplier; betPlaced=false; updateUI();
    }
  };

  autoBtn.onclick=()=>{ autoBet=!autoBet; updateUI(); };
  cashBtn.onclick=()=>{ if(betPlaced){ balance+=bet*multiplier; betPlaced=false; updateUI(); } };

  function liveUpdate(){
    if(betPlaced && animating){
      main.querySelector('span').textContent = `üí∞ Cash Out: ${(bet*multiplier).toFixed(2)} KES`;
      requestAnimationFrame(liveUpdate);
    } else {
      setTimeout(liveUpdate,50); // Check periodically if bet is placed
    }
  }
  liveUpdate();

  updateUI();
  betSystems.push({id, bet, betPlaced, autoBet, updateUI});
}

createBetSystem(1,10);
createBetSystem(2,100);
startCountdown();
</script>

<footer style="
  background:#1a1a1a;
  color:#fff;
  text-align:center;
  padding:15px 0;
  border-top:2px solid #333;
  margin-top:20px;
  font-size:14px;
">
  &copy; Denis Muia 2025. All rights reserved.
</footer>

</body>
  </html>
