<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Aviator</title>
<style>
body { background:#111; color:#fff; font-family:Arial,sans-serif; text-align:center; margin:0; padding:0; }
.wrapper { width:90%; max-width:820px; margin:0 auto; display:flex; flex-direction:column; align-items:center; }
canvas { display:block; margin:10px auto; border:3px solid #fff; border-radius:10px; width:100%; height:180px; max-height:250px; background:#000; }
.container { width:100%; margin:5px auto; padding:8px; background:#1a1a1a; border-radius:12px; border:2px solid #333; box-shadow:0 0 10px rgba(255,255,255,0.08); display:flex; flex-direction:column; align-items:center; gap:6px; max-height:300px; overflow:hidden; }
.bet-display { width:50px; text-align:center; background:#000; border-radius:8px; padding:3px 0; font-size:12px; font-weight:bold; }
button { border:none; cursor:pointer; font-weight:bold; transition:all 0.2s ease; }
.right-btn { height:40px; border-radius:12px; font-size:18px; font-weight:bold; color:#fff; background:linear-gradient(90deg,#00c853,#00e676); border:2px solid #00ff88; box-shadow:0 4px 12px rgba(0,200,83,0.4); display:flex; align-items:center; justify-content:center; }
.right-btn span {pointer-events:none;}
.right-btn:hover { background:linear-gradient(90deg,#00e676,#00ff88); border-color:#00ff88; box-shadow:0 6px 18px rgba(0,230,118,0.6); transform:scale(1.05); }
.action-btn, .preset-btn { background:linear-gradient(90deg,#4f46e5,#6366f1); color:#fff; padding:6px 10px; border-radius:12px; font-size:14px; flex:1; min-width:80px; box-shadow:0 3px 8px rgba(100,100,255,0.3); display:flex; align-items:center; justify-content:center; }
.action-btn:hover, .preset-btn:hover { background:linear-gradient(90deg,#6366f1,#4f46e5); box-shadow:0 5px 12px rgba(100,100,255,0.5); transform:scale(1.05); }
.adjust-btn { background:linear-gradient(90deg,#ff5722,#ff7043); color:#fff; font-size:14px; width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; margin:0 2px; }
.adjust-btn:hover { background:linear-gradient(90deg,#ff7043,#ff5722); box-shadow:0 5px 10px rgba(255,87,34,0.6); transform:scale(1.1); }
button:active { transform:scale(0.97); }
.preset-grid { display:flex; justify-content:center; gap:6px; margin-bottom:4px; }
.inner-control.action-row { display:flex; justify-content:center; gap:8px; margin-bottom:4px; flex-wrap:wrap; align-items:center; }
.inner-control.main-action { justify-content:center; margin-top:6px; }
.left-controls { display:flex; justify-content:center; gap:6px; }
.auto-btn.inactive { background: linear-gradient(90deg,#2196f3,#42a5f5); }
.auto-btn.active { background: linear-gradient(90deg,#006400,#228B22); }
.auto-cash { display:flex; align-items:center; justify-content:center; gap:5px; padding:5px 10px; border-radius:12px; }
.auto-cash span { pointer-events:none; font-weight:bold; color:#fff; }
@media(max-width:600px){ .action-btn,.preset-btn{ font-size:12px; padding:6px; min-width:70px; } .adjust-btn{ width:25px;height:25px;font-size:12px; } .right-btn{ height:36px;font-size:16px; } canvas { height:150px; } .container { max-height:280px; padding:6px; gap:4px; } .bet-display { font-size:11px; width:40px; } .auto-cash{ font-size:12px; } }
.round-history { max-width:820px; margin:5px auto; font-size:12px; color:#aaa; display:flex; flex-wrap:wrap; gap:4px; justify-content:center; }
.round { background:rgba(255,255,255,0.1); padding:3px 6px; border-radius:3px; color:white; }
table { width:100%; border-collapse:collapse; }
table th, table td { border:1px solid #333; padding:6px; text-align:center; }
table th { background:#222; }
</style>
</head>
<body>

<div style="display:flex; justify-content:space-between; align-items:center; max-width:820px; margin:5px auto; padding:8px 16px; background:#1a1a1a; border-radius:10px; border:2px solid #333;">
  <h2 style="color:red; margin:0; font-size:18px;">Aviator</h2>
  <div style="display:flex; align-items:center; gap:10px;">
    <div style="color:#00ff00; font-weight:bold; font-size:14px;">
      Balance: <span id="balance">5000</span>
    </div>
  </div>
    <button id="provablyFairBtn" style="padding:4px 8px; border-radius:8px; background:#4f46e5; color:#fff; border:none; cursor:pointer; font-size:12px;">
      Provably Fair
    </button>
</div>
    
<div class="round-history" id="roundHistory"></div>

<div class="wrapper">
  <canvas id="canvas" width="800" height="250"></canvas>

  <!-- Container 1 -->
  <div class="container" id="container1">
    <div class="inner-control left-controls">
      <button id="decBet1" class="adjust-btn">-</button>
      <div class="bet-display" id="betDisplay1">10</div>
      <button id="incBet1" class="adjust-btn">+</button>
    </div>
    <div class="inner-control action-row">
      <button id="autoToggle1" class="auto-btn inactive">‚öôÔ∏è Auto Cash Out: OFF</button>
      <div id="cashOut1" class="auto-cash">
        <span style="margin-right:5px;">Auto Cash Out:</span>
        <button id="decCash1" class="adjust-btn">-</button>
        <span id="autoCash1">2√ó</span>
        <button id="incCash1" class="adjust-btn">+</button>
      </div>
    </div>
    <div class="preset-grid">
      <button class="preset-btn" data-bet="10">10</button>
      <button class="preset-btn" data-bet="50">50</button>
      <button class="preset-btn" data-bet="100">100</button>
    </div>
    <div class="inner-control main-action">
      <button id="mainAction1" class="right-btn"><span>üéØ Bet 10.00 KES</span></button>
    </div>
  </div>

  <!-- Container 2 -->
  <div class="container" id="container2">
    <div class="inner-control left-controls">
      <button id="decBet2" class="adjust-btn">-</button>
      <div class="bet-display" id="betDisplay2">100</div>
      <button id="incBet2" class="adjust-btn">+</button>
    </div>
    <div class="inner-control action-row">
      <button id="autoToggle2" class="auto-btn inactive">‚öôÔ∏è Auto Cash Out: OFF</button>
      <div id="cashOut2" class="auto-cash">
        <span style="margin-right:5px;">Auto Cash Out:</span>
        <button id="decCash2" class="adjust-btn">-</button>
        <span id="autoCash2">2√ó</span>
        <button id="incCash2" class="adjust-btn">+</button>
      </div>
    </div>
    <div class="preset-grid">
      <button class="preset-btn" data-bet="10">10</button>
      <button class="preset-btn" data-bet="50">50</button>
      <button class="preset-btn" data-bet="100">100</button>
    </div>
    <div class="inner-control main-action">
      <button id="mainAction2" class="right-btn"><span>üéØ Bet 100.00 KES</span></button>
    </div>
  </div>

  <!-- Players Cash Out Table -->
  <div style="width:100%; margin-top:10px; overflow-x:auto;">
    <table id="playersTable">
      <thead>
        <tr>
          <th>Player No</th>
          <th>Cash Out Point</th>
          <th>Amount Cashed Out</th>
        </tr>
      </thead>
      <tbody id="playersTableBody">
        <!-- Dynamic rows appear here -->
      </tbody>
    </table>
  </div>

</div>
<script>
const balanceEl = document.getElementById("balance"), roundHistoryEl = document.getElementById("roundHistory");
let balance = 5000, countdown = 6, inCountdown = true, stripeOffset = 0, rounds = [], flyTextArray = [];
let multiplier = 1, crashed = false, animating = false, crashAt = 0;

// Load countdown image
const countdownImage = new Image();
countdownImage.src = "countdown.png";

class BetSystem {
  constructor(id, initialBet){
    this.id = id; this.bet = initialBet; this.betPlaced = false;
    this.autoCashActive = false;
    this.autoCashTarget = 2;
    this.betDisplay = document.getElementById(`betDisplay${id}`);
    this.inc = document.getElementById(`incBet${id}`);
    this.dec = document.getElementById(`decBet${id}`);
    this.main = document.getElementById(`mainAction${id}`);
    this.presetBtns = document.querySelectorAll(`#container${id} .preset-btn`);
    this.autoBtn = document.getElementById(`autoToggle${id}`);
    this.decCash = document.getElementById(`decCash${id}`);
    this.incCash = document.getElementById(`incCash${id}`);
    this.autoCashDisplay = document.getElementById(`autoCash${id}`);

    this.updateUI();

    this.inc.onclick = () => { this.bet += 10; this.updateUI(); updatePlayersTable(); };
    this.dec.onclick = () => { this.bet = Math.max(10,this.bet-10); this.updateUI(); updatePlayersTable(); };
    this.presetBtns.forEach(btn => btn.onclick = () => { this.bet = Number(btn.dataset.bet); this.updateUI(); updatePlayersTable(); });

    this.incCash.onclick = e => { e.stopPropagation(); this.autoCashTarget = +(this.autoCashTarget+0.1).toFixed(1); this.updateUI(); updatePlayersTable(); };
    this.decCash.onclick = e => { e.stopPropagation(); this.autoCashTarget = +(Math.max(1.1,this.autoCashTarget)-0.1).toFixed(1); this.updateUI(); updatePlayersTable(); };

    this.autoBtn.onclick = () => {
      this.autoCashActive = !this.autoCashActive;
      this.autoBtn.classList.toggle("active", this.autoCashActive);
      this.autoBtn.classList.toggle("inactive", !this.autoCashActive);
      this.updateUI();
      updatePlayersTable();
    }

    this.main.onclick = () => {
      if(!this.betPlaced && balance>=this.bet){
        balance-=this.bet; this.betPlaced=true; this.updateUI(); updatePlayersTable();
      } else if(this.betPlaced){
        balance+=this.bet*multiplier; this.betPlaced=false; this.autoCashActive=false;
        this.autoBtn.classList.remove("active");
        this.autoBtn.classList.add("inactive");
        this.updateUI(); updatePlayersTable();
      }
    }

    this.liveUpdate();
  }

  updateUI(){
    this.betDisplay.textContent = this.bet;
    this.autoCashDisplay.textContent = this.autoCashTarget+"√ó";
    if(this.betPlaced){
      let cash = this.autoCashActive ? Math.min(multiplier,this.autoCashTarget) : multiplier;
      this.main.querySelector('span').textContent = `üí∞ Cash Out: ${(this.bet*cash).toFixed(2)} KES`;
      if(this.autoCashActive && multiplier>=this.autoCashTarget){
        balance += this.bet*this.autoCashTarget; this.betPlaced=false; this.autoCashActive=false;
        this.autoBtn.classList.remove("active"); this.autoBtn.classList.add("inactive");
      }
    } else {
      this.main.querySelector('span').textContent=`üéØ Bet ${this.bet.toFixed(2)} KES`;
    }
    this.autoBtn.textContent=`‚öôÔ∏è Auto Cash Out: ${this.autoCashActive?"ON":"OFF"}`;
    balanceEl.textContent=balance.toFixed(2);
  }

  liveUpdate(){
    if(this.betPlaced && animating){
      let cash = this.autoCashActive ? Math.min(multiplier,this.autoCashTarget) : multiplier;
      this.main.querySelector('span').textContent = `üí∞ Cash Out: ${(this.bet*cash).toFixed(2)} KES`;
      updatePlayersTable();
      requestAnimationFrame(()=>this.liveUpdate());
    } else setTimeout(()=>this.liveUpdate(),50);
  }
}

const betSystem1 = new BetSystem(1,10);
const betSystem2 = new BetSystem(2,100);
const players = [betSystem1, betSystem2];
const playersTableBody = document.getElementById("playersTableBody");

function updatePlayersTable() {
  playersTableBody.innerHTML = "";
  players.forEach(p => {
    if(p.betPlaced){
      const cash = p.autoCashActive ? Math.min(multiplier,p.autoCashTarget) : multiplier;
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${p.id}</td>
        <td>${multiplier.toFixed(2)}√ó</td>
        <td>${(p.bet*cash).toFixed(2)} KES</td>
      `;
      playersTableBody.appendChild(tr);
    }
  });
}

// Canvas setup
const canvas=document.getElementById("canvas"), ctx=canvas.getContext("2d");

function drawStripes(){
  const gradient=ctx.createLinearGradient(0,0,0,canvas.height);
  gradient.addColorStop(0,"#222");
  gradient.addColorStop(0.5,"#333");
  gradient.addColorStop(1,"#222");
  ctx.fillStyle=gradient;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  const stripeWidth=20,stripeGap=23;
  ctx.strokeStyle="rgba(255,255,255,0.05)";
  ctx.lineWidth=2;
  for(let x=-canvas.height+(stripeOffset%(stripeWidth+stripeGap));x<canvas.width;x+=stripeWidth+stripeGap){
    ctx.beginPath();
    ctx.moveTo(x,0);
    ctx.lineTo(x+canvas.height,canvas.height);
    ctx.stroke();
  }
  stripeOffset+=1;
}

function draw(){
  drawStripes();

  // Countdown logic
  if(inCountdown){
    if (countdownImage.complete) {
      const imgWidth = 180, imgHeight = 180;
      const imgX = canvas.width/2 - imgWidth/2;
      const imgY = canvas.height/2 - imgHeight/2;

      ctx.drawImage(countdownImage, imgX, imgY, imgWidth, imgHeight);

      // Countdown number inside image
      ctx.fillStyle = "#fff";
      ctx.font = "bold 60px Arial";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText(countdown, canvas.width/2, canvas.height/2);

      // Signature below image
      ctx.fillStyle = "#fff";
      ctx.font = "bold 27px Arial";
      ctx.textAlign = "center";
      ctx.textBaseline = "top";
      ctx.fillText("poweredbydenis@2025", canvas.width/2, imgY + imgHeight + 10);
    }
    return;
  }

  // Game multiplier text
  ctx.font="bold 40px Arial";
  ctx.fillStyle=crashed?"#f00":"#fff";
  ctx.textAlign="center";
  ctx.fillText(multiplier.toFixed(2)+"√ó",canvas.width/2,canvas.height/2);

  flyTextArray.forEach((t,i)=>{
    ctx.font="bold 30px Arial";
    ctx.fillStyle="white";
    ctx.textAlign="center";
    ctx.globalAlpha=t.alpha;
    ctx.fillText(t.msg,canvas.width/2,canvas.height/2-t.y);
    t.y+=2;
    t.alpha-=0.02;
    if(t.alpha<=0) flyTextArray.splice(i,1);
  });
  ctx.globalAlpha=1;
}

function startRound(){
  multiplier=1; crashed=false; animating=true; crashAt=1.01+Math.random()*3;
  const ctxAudio=new(window.AudioContext||window.webkitAudioContext)();
  const osc=ctxAudio.createOscillator(); const gain=ctxAudio.createGain();
  osc.connect(gain); gain.connect(ctxAudio.destination);
  osc.type="sine"; osc.frequency.value=300;
  gain.gain.setValueAtTime(0.05,ctxAudio.currentTime);
  osc.start();

  function animate(){
    if(!animating)return;
    multiplier+=0.02; osc.frequency.value+=1;
    if(multiplier>=crashAt){
      animating=false; crashed=true; osc.stop();
      flyTextArray.push({msg:"Flew Away!",y:0,alpha:1});
      addRoundToHistory(multiplier.toFixed(2));
      [betSystem1,betSystem2].forEach(sys=>{
        if(sys.autoCashActive && balance>=sys.bet){
          balance-=sys.bet; sys.betPlaced=true; sys.updateUI();
        } else {
          sys.betPlaced=false; sys.autoCashActive=false;
          sys.autoBtn.classList.remove("active");
          sys.autoBtn.classList.add("inactive");
          sys.updateUI(); updatePlayersTable();
        }
      });
      setTimeout(()=>startCountdown(),2000);
    }
    draw();
    if(animating)requestAnimationFrame(animate);
  }
  animate();
}

function startCountdown(){
  inCountdown=true; countdown=6;
  const interval=setInterval(()=>{
    countdown--;
    if(countdown<=0){
      clearInterval(interval);
      inCountdown=false;
      startRound();
    }
  },1000);
}

function addRoundToHistory(mult){
  rounds.unshift(mult);
  if(rounds.length>9) rounds.pop();
  renderRounds();
}

function renderRounds(){
  roundHistoryEl.innerHTML='';
  rounds.forEach(r=>{
    const div=document.createElement('div');
    div.className='round';
    div.textContent=r+'√ó';
    if(r<2) div.style.background='#2196f3';
    else if(r<10) div.style.background='#9c27b0';
    else div.style.background='#f44336';
    div.style.color='white';
    roundHistoryEl.appendChild(div);
  });
}

function loop(){
  draw();
  requestAnimationFrame(loop);
}

loop();
startCountdown();
</script>




<footer style="background:#1a1a1a; color:#fff; text-align:center; padding:10px 0; border-top:2px solid #333; margin-top:10px; font-size:12px;">
  &copy; Denis Muia 2025. All rights reserved.
</footer>

</body>
</html>

